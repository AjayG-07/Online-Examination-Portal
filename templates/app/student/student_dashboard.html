{% extends 'app/base.html' %}
{%load static%}
{% block content %}
<div class="container mt-5">
  <div class="row g-4">
    
    <!-- Student Profile Sidebar -->
    <div class="col-lg-4">
      <div class="card shadow-lg rounded-4 border-0 overflow-hidden">
        <div class="bg-gradient bg-primary text-white text-center py-4">
          <h4 class="mb-0">Student Profile</h4>
        </div>
        <div class="card-body text-center p-4">
          {% if user.profile_image %}
            <img src="{{ user.profile_image.url }}" class="rounded-circle shadow mb-3" width="120" height="120" alt="Profile Image">
          {% else %}
            <img src="{% static 'img/user.avif' %}" class="rounded-circle shadow mb-3"  width="120" height="120" alt="No Image">
          {% endif %}
          <h5 class="fw-bold">{{ user.get_full_name|default:'Student001' }}</h5>
          <p class="text-muted mb-1">{{ user.email|default:'student001@gmail.com' }}</p>
          <p class="mb-1"><i class="bi bi-telephone-fill me-2"></i>{{ user.phone|default:'+91 8565452532' }}</p>
          <p><i class="bi bi-geo-alt-fill me-2"></i>{{ user.address|default:'Mumbai' }}</p>
          <div class="d-grid gap-2 mt-3">
            {% if user.id %}
            <a href="{% url 'profile_detail' user.id %}" class="btn btn-outline-primary btn-sm">View Profile</a>
            <a href="{% url 'profile_edit' user.id %}" class="btn btn-outline-secondary btn-sm">Edit Profile</a>
          {% else %}
            <span class="text-danger">No Profile Available Please Login?</span>
          {% endif %}

          </div>
        </div>
      </div>
    </div>

    

    <!-- Available Exams -->
    <div class="col-lg-8">
      <h3 class="mb-5 text-primary">Available Exams</h3>
      <div class="row g-4">
        {% for exam in exams %}
        <div class="col-md-6">
          <div class="card shadow-sm h-100 border-0 rounded-4 hover-shadow transition-all">
            <div class="card-body d-flex flex-column justify-content-between">
              <div>
                <h5 class="card-title text-dark">{{ exam.title }}</h5>
                <p class="text-muted small">{{ exam.description|truncatewords:20 }}</p>
                <p><span class="fw-semibold">Duration:</span> {{ exam.duration }} minutes</p>
                <p><span class="fw-semibold">Date:</span> {{ exam.date }}</p>
              </div>
              <a href="{% url 'exam_instructions' exam.id %}" class="btn btn-primary btn-sm mt-2 w-100">Start Exam</a>
            </div>
          </div>
        </div>
        {% empty %}
        <div class="col-12">
          <div class="alert alert-info text-center">No exams available at the moment.</div>
        </div>
        {% endfor %}
      </div>
    </div>

  </div>
</div>

<style>
  .hover-shadow:hover {
    box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15) !important;
    transform: scale(1.01);
  }
  .transition-all {
    transition: all 0.3s ease-in-out;
  }
</style>
{% endblock %}
